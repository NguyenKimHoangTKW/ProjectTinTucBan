@{
    ViewBag.Title = "Trang chủ";
    var imageList = new[] {
        "29fcbd0c-9d4b-4b47-9ae2-121f14eb4cf9.png",
        "b58bda5e-a637-4d82-8c11-4ddd3b6e9bc9.png",
        "25e7413b-3051-42a4-9d8e-11407261a294.png"
    };
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>Trang chủ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .swiper {
            width: 100%;
        }
    </style>
</head>
<body class="bg-white">

    <!-- Swiper Banner -->
    <section class="relative w-full bg-white overflow-hidden">
        <div class="swiper mySwiper w-full">
            <div class="swiper-wrapper">
                @foreach (var img in imageList)
                {
                    <div class="swiper-slide">
                        <img src="https://bdbcl.tdmu.edu.vn/img/ckeditor/Images/@img" alt="Banner" class="object-cover w-full" />
                    </div>
                }
            </div>
            <div class="swiper-button-next text-white"></div>
            <div class="swiper-button-prev text-white"></div>
            <div class="swiper-pagination"></div>
        </div>
    </section>

    <!-- Mục lục và bài viết -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 py-6">
        <h2 class="text-center text-lg sm:text-xl md:text-2xl font-bold text-blue-800 mb-6 uppercase">
            Tin tức về hoạt động đảm bảo chất lượng
        </h2>

        <div id="muc-luc-content">
            <div class="text-gray-500 italic">Đang tải dữ liệu...</div>
        </div>
    </section>
    <!-- Đoạn HTML mới được chèn thêm vào file Trang chủ -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 py-6">
        <div class="text-center mb-6">
            <h2 class="text-xl sm:text-2xl font-bold text-white bg-red-600 px-6 py-3 inline-block rounded-full uppercase">
                Kiểm định chất lượng
            </h2>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Cột THÔNG BÁO -->
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-lg font-bold text-blue-700 mb-4 border-b pb-2">THÔNG BÁO</h3>
                <div id="box-thongbao">
                    <p class="italic text-gray-500">Đang tải...</p>
                </div>
            </div>

            <!-- Cột THÔNG BÁO (phần 2 bên phải của ảnh gốc) -->
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-lg font-bold text-blue-700 mb-4 border-b pb-2">THÔNG BÁO KHÁC</h3>
                <div id="box-thongbao-2">
                    <p class="italic text-gray-500">Đang tải...</p>
                </div>
            </div>

            <!-- Cột BIỂU MẪU -->
            <div class="bg-white rounded shadow p-4">
                <h3 class="text-lg font-bold text-blue-700 mb-4 border-b pb-2">BIỂU MẪU</h3>
                <ul id="box-bieumau" class="space-y-2 text-sm">
                    <li class="italic text-gray-500">Đang tải...</li>
                </ul>
            </div>
        </div>
    </section>

    <script>
        $(document).ready(function () {
            LoadKiemDinhNoiDung();
        });

        async function LoadKiemDinhNoiDung() {
            try {
                const res = await $.ajax({ url: `${BASE_URL}/get-all-baiviet`, type: 'GET' });

                if (res.success && Array.isArray(res.data)) {
                    const tbList = res.data.filter(x => x.TieuDe.includes("Thông báo"));
                    const bmList = res.data.filter(x => x.TieuDe.toLowerCase().includes("phiếu"));

                    const renderTB = tbList.slice(0, 4).map(bv => `
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="${bv.LinkThumbnail || 'https://via.placeholder.com/60'}" alt="thumb" class="w-14 h-14 object-cover rounded" />
                            <div>
                                <a href="/Home/XemNoiDung/${bv.ID}" class="text-sm font-semibold text-gray-800 hover:text-blue-600 line-clamp-2">${bv.TieuDe}</a>
                                <div class="text-xs text-gray-500 mt-1"><i class="far fa-clock"></i> ${formatDateFromInt(bv.NgayDang)}</div>
                            </div>
                        </div>
                    `).join('');

                    const renderTB2 = tbList.slice(4, 8).map(bv => `
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="${bv.LinkThumbnail || 'https://via.placeholder.com/60'}" alt="thumb" class="w-14 h-14 object-cover rounded" />
                            <div>
                                <a href="/Home/XemNoiDung/${bv.ID}" class="text-sm font-semibold text-gray-800 hover:text-blue-600 line-clamp-2">${bv.TieuDe}</a>
                                <div class="text-xs text-gray-500 mt-1"><i class="far fa-clock"></i> ${formatDateFromInt(bv.NgayDang)}</div>
                            </div>
                        </div>
                    `).join('');

                    const renderBM = bmList.map(bv => `
                        <li><i class="fa fa-headphones mr-2 text-blue-600"></i><a href="/Home/XemNoiDung/${bv.ID}" class="hover:underline">${bv.TieuDe}</a></li>
                    `).join('');

                    $('#box-thongbao').html(renderTB || '<p class="text-sm italic text-gray-500">Không có thông báo.</p>');
                    $('#box-thongbao-2').html(renderTB2 || '<p class="text-sm italic text-gray-500">Không có thông báo.</p>');
                    $('#box-bieumau').html(renderBM || '<li class="text-sm italic text-gray-500">Không có biểu mẫu.</li>');
                } else {
                    $('#box-thongbao, #box-thongbao-2').html('<p class="text-sm italic text-red-500">Không có dữ liệu.</p>');
                    $('#box-bieumau').html('<li class="text-sm italic text-red-500">Không có dữ liệu.</li>');
                }
            } catch (err) {
                $('#box-thongbao, #box-thongbao-2').html('<p class="text-sm italic text-red-500">Lỗi khi tải dữ liệu.</p>');
                $('#box-bieumau').html('<li class="text-sm italic text-red-500">Lỗi khi tải dữ liệu.</li>');
                console.error(err);
            }
        }
    </script>
    <!-- Giới thiệu về Trung tâm -->
    <section class="max-w-5xl mx-auto px-4 sm:px-6 md:px-8 py-6">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6">Giới thiệu về Trung tâm</h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="flex items-start space-x-4">
                <div class="text-blue-600 text-2xl">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div>
                    <p class="text-gray-600 font-semibold">Tên đầy đủ</p>
                    <p class="text-red-600 font-bold uppercase">BAN KHẢO THÍ, KIỂM ĐỊNH VÀ ĐẢM BẢO CHẤT LƯỢNG</p>
                </div>
            </div>

            <div class="flex items-start space-x-4">
                <div class="text-blue-600 text-2xl">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div>
                    <p class="text-gray-600 font-semibold">Tên tiếng Anh</p>
                    <p class="text-red-600 font-bold uppercase">DEPARTMENT OF EDUCATIONAL TESTING, ACCREDITATION AND QUALITY ASSURANCE</p>
                </div>
            </div>

            <div class="flex items-start space-x-4">
                <div class="text-blue-600 text-2xl">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div>
                    <p class="text-gray-600 font-semibold">Ngày thành lập</p>
                    <p class="text-blue-700 font-bold">17/7/2024</p>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap items-center space-x-4 text-sm text-gray-700">
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M10 20s8-4.438 8-10V4l-8-4-8 4v6c0 5.562 8 10 8 10z" /></svg>
                <span>Đây G, Số 06, đường Trần Văn Ơn, phường Phú Hòa, Tp. Thủ Dầu Một, Bình Dương</span>
            </div>
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2 5.5A2.5 2.5 0 014.5 3h11A2.5 2.5 0 0118 5.5v9a2.5 2.5 0 01-2.5 2.5h-11A2.5 2.5 0 012 14.5v-9zM4.5 4a1.5 1.5 0 00-1.5 1.5v.637l7 4.375 7-4.375V5.5A1.5 1.5 0 0015.5 4h-11z" /></svg>
                <a href="mailto:bdbcl@tdmu.edu.vn" class="text-blue-600 hover:underline">bdbcl@tdmu.edu.vn</a>
            </div>
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3.5A1.5 1.5 0 013.5 2h13A1.5 1.5 0 0118 3.5v13a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 012 16.5v-13zM3.5 3a.5.5 0 00-.5.5V6h14V3.5a.5.5 0 00-.5-.5h-13zM17 7H3v9.5a.5.5 0 00.5.5h13a.5.5 0 00.5-.5V7z" /></svg>
                <span>(0274) 3822518-3-114</span>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const BASE_URL = '/api/v1/admin';

        $(document).ready(function () {
            LoadMucLucWithBaiViet();

            new Swiper('.mySwiper', {
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev'
                },
                autoplay: {
                    delay: 4000,
                    disableOnInteraction: false
                },
                slidesPerView: 1
            });
        });
        async function LoadMucLucWithBaiViet() {
            try {
                const res = await $.ajax({
                    url: `${BASE_URL}/get-mucluc-with-baiviet`,
                    type: 'GET'
                });

                const container = $('#muc-luc-content');
                container.empty();

                if (res.success && Array.isArray(res.data)) {
                    res.data.forEach(muc => {
                        const htmlBaiViet = muc.BaiViets.length > 0
                            ? `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                                                    ${muc.BaiViets.map(bv => `
                                                        <a href="/Home/XemNoiDung/${bv.ID}" class="block bg-white rounded shadow hover:shadow-lg transition overflow-hidden border">
                                                            <div class="relative">
                                                                <img src="${bv.LinkThumbnail && bv.LinkThumbnail.trim() !== '' ? bv.LinkThumbnail : 'https://navigates.vn/wp-content/uploads/2023/06/logo-dai-hoc-thu-dau-mot.jpg'}"
                                                                     class="w-full h-32 sm:h-40 md:h-44 object-cover" />
                                                                <div class="absolute top-2 left-2 bg-blue-700 text-white rounded text-[10px] sm:text-xs font-bold px-2 py-1 text-center shadow">
                                                                    ${formatDay(bv.NgayDang)}<br />
                                                                    <span class="uppercase">${formatMonth(bv.NgayDang)}</span>
                                                                </div>
                                                            </div>
                                                            <div class="p-3">
                                                                <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-2 line-clamp-2 uppercase">${bv.TieuDe}</h3>
                                                                <p class="text-[10px] sm:text-xs md:text-sm text-gray-600 line-clamp-3">${truncateHtml(bv.NoiDung, 150)}</p>
                                                            </div>
                                                        </a>
                                                    `).join('')}
                                                </div>`
                            : `<p class="text-gray-500 italic">Không có bài viết nào.</p>`;

                        const block = `
                                            <div class="mb-12">
                                                <div class="flex justify-center mb-4">
                                                    <h3 class="text-sm sm:text-base md:text-xl font-bold text-white uppercase bg-red-600 px-3 sm:px-4 py-2 rounded shadow">
                                                        ${muc.TenMucLuc}
                                                    </h3>
                                                </div>
                                                ${htmlBaiViet}
                                            </div>`;

                        container.append(block);
                    });
                } else {
                    container.html('<p class="text-red-500">Không có dữ liệu mục lục nào.</p>');
                }
            } catch (err) {
                $('#muc-luc-content').html('<p class="text-red-500">Lỗi kết nối đến máy chủ.</p>');
                console.error(err);
            }
        }

        function formatDay(dateInt) {
            return dateInt ? dateInt.toString().slice(6, 8) : '';
        }

        function formatMonth(dateInt) {
            const month = dateInt.toString().slice(4, 6);
            const mapping = {
                "01": "Tháng 1", "02": "Tháng 2", "03": "Tháng 3", "04": "Tháng 4",
                "05": "Tháng 5", "06": "Tháng 6", "07": "Tháng 7", "08": "Tháng 8",
                "09": "Tháng 9", "10": "Tháng 10", "11": "Tháng 11", "12": "Tháng 12"
            };
            return mapping[month] || '';
        }
        function truncateHtml(html, maxLength) {
            const temp = document.createElement('div');
            temp.innerHTML = html || '';
            const text = temp.textContent || temp.innerText || '';
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }</script>
</body>
</html>
