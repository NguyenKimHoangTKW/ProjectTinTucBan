<!-- TrangChuFooterPartial.cshtml -->
<footer class="bg-[#29A3E0] text-white text-sm py-6">
    <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-end space-x-4">
            <div class="text-white">
                Tổng lượt truy cập: <span id="visitorTotal" class="font-semibold"></span>
            </div>
            <div class="text-white">
                Đang online: <span id="visitorOnline" class="font-semibold"></span>
            </div>
        </div>
    </div>
</footer>

<script>
    $(document).ready(function () {
        // Tăng lượt truy cập
        $.ajax({
            type: "POST",
            url: "/api/visitor/increase",
            success: function (data) {
                $("#visitorTotal").text(data.total);
                $("#visitorOnline").text(data.online);
            },
            error: function (xhr, status, error) {
                console.error("❌ Lỗi cập nhật truy cập:", error);
            }
        });
    });

    // Giảm lượt truy cập khi rời trang
    $(window).on("beforeunload", function () {
        $.ajax({
            type: "POST",
            url: "/api/visitor/decrease",
            async: false
        });
    });
</script>
